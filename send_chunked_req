import http.client

# Establish a connection
conn = http.client.HTTPConnection("localhost", 4040)

# Create the request with chunked transfer encoding
conn.putrequest("POST", "/path/to/resource")
conn.putheader("Transfer-Encoding", "chunked")
conn.putheader("Content-Type", "application/x-www-form-urlencoded")
conn.endheaders()

# Send chunks
chunks = [
    b"4\r\nThis\r\n",
    b"5\r\n is a\r\n",
    b"7\r\n chunked r\r\n",
    b"4\r\nesponse\r\n",
    b"0\r\n\r\n"
]

for chunk in chunks:
    conn.send(chunk)

# End of request
conn.send(b"0\r\n\r\n")  # End of chunks

# Get the response from the server
response = conn.getresponse()
print(response.status, response.reason)
print(response.read().decode())

# Close the connection
conn.close()
